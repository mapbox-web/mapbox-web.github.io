import{_ as a,c as i,ag as e,o as n}from"./chunks/framework.BRsuZZrq.js";const c=JSON.parse('{"title":"地图标绘（@mapbox-web/draw）","description":"","frontmatter":{},"headers":[],"relativePath":"zh-CN/draw/index.md","filePath":"zh-CN/draw/index.md"}'),l={name:"zh-CN/draw/index.md"};function p(t,s,r,h,d,k){return n(),i("div",null,s[0]||(s[0]=[e(`<h1 id="地图标绘-mapbox-web-draw" tabindex="-1">地图标绘（@mapbox-web/draw） <a class="header-anchor" href="#地图标绘-mapbox-web-draw" aria-label="Permalink to &quot;地图标绘（@mapbox-web/draw）&quot;">​</a></h1><h2 id="介绍" tabindex="-1">介绍 <a class="header-anchor" href="#介绍" aria-label="Permalink to &quot;介绍&quot;">​</a></h2><p><code>@mapbox-web/draw</code> 库扩展自 <code>mapbox-gl-draw</code>，支持以下图形的绘制：</p><ol><li>文本</li></ol><ul><li>&#39;draw_text&#39;: &#39;文本&#39;</li></ul><ol start="2"><li>线状</li></ol><ul><li>&#39;draw_line_string&#39;: &#39;折线&#39;</li><li>&#39;draw_curve&#39;: &#39;曲线&#39;</li><li>&#39;draw_arc&#39;: &#39;弧线&#39;</li></ul><ol start="3"><li>面状</li></ol><ul><li>&#39;draw_polygon&#39;: &#39;多边形&#39;</li><li>&#39;draw_circle&#39;: &#39;圆&#39;</li><li>&#39;draw_ellipse&#39;: &#39;椭圆&#39;</li><li>&#39;draw_rectangle&#39;: &#39;矩形&#39;</li><li>&#39;draw_sector&#39;: &#39;扇形&#39;</li><li>&#39;draw_lune&#39;: &#39;弓形&#39;</li><li>&#39;draw_closed_curve&#39;: &#39;闭合曲面&#39;</li></ul><ol start="4"><li>箭头</li></ol><ul><li>&#39;draw_fine_arrow&#39;: &#39;细直箭头&#39;</li><li>&#39;draw_assault_direction&#39;: &#39;突击方向&#39;</li><li>&#39;draw_double_arrow&#39;: &#39;钳击&#39;</li><li>&#39;draw_attack_arrow&#39;: &#39;进攻箭头&#39;</li><li>&#39;draw_tailed_attack_arrow&#39;: &#39;燕尾进攻箭头&#39;</li><li>&#39;draw_squad_combat&#39;: &#39;战斗小队&#39;</li></ul><ol start="5"><li>图片</li></ol><ul><li>&#39;draw_image&#39;: &#39;PNG图片&#39;</li></ul><h2 id="安装" tabindex="-1">安装 <a class="header-anchor" href="#安装" aria-label="Permalink to &quot;安装&quot;">​</a></h2><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @mapbox-web/draw</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yarn</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @mapbox-web/draw</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> @mapbox-web/draw</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="api方法" tabindex="-1">API方法 <a class="header-anchor" href="#api方法" aria-label="Permalink to &quot;API方法&quot;">​</a></h2><h3 id="初始化-userproperties-true为必设属性" tabindex="-1">初始化（userProperties: true为必设属性） <a class="header-anchor" href="#初始化-userproperties-true为必设属性" aria-label="Permalink to &quot;初始化（userProperties: true为必设属性）&quot;">​</a></h3><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MapboxDraw </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@mapbox-web/draw&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> $draw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MapboxDraw</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(map, {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  userProperties: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> //必传</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="切换模式" tabindex="-1">切换模式 <a class="header-anchor" href="#切换模式" aria-label="Permalink to &quot;切换模式&quot;">​</a></h3><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$draw.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">changeMode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(\${modeName})</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 图标绘制的API较为特殊,需传入图标对应参数，其中各个图标的ID不可重复且图标仅支持png格式</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$draw.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">changeMode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;draw_image&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,{imageId: \${imageId}, imageUrl: \${imageUrl}})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="获取id-并设置属性" tabindex="-1">获取id，并设置属性 <a class="header-anchor" href="#获取id-并设置属性" aria-label="Permalink to &quot;获取id，并设置属性&quot;">​</a></h3><p>对绘制结果的操作都是通过id进行的</p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$draw.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setFeatureProperty</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(\${id},\${key},\${value})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="获取字典表" tabindex="-1">获取字典表 <a class="header-anchor" href="#获取字典表" aria-label="Permalink to &quot;获取字典表&quot;">​</a></h3><p>可通过事件中返回要素的字典表查询每一个图形有哪些属性可以设置 字典表获取方式：</p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">features[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].properties[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;properties-dictionary&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>以多边形的字典表为例</p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { key: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;fill-color&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;填充色&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;color&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { key: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;line-color&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;边框色&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;color&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { key: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;opacity&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;透明度&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;number&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, step: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, min: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, max: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> },</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  { key: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;description&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, label: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;说明&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;textArea&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="事件" tabindex="-1">事件 <a class="header-anchor" href="#事件" aria-label="Permalink to &quot;事件&quot;">​</a></h2><p>与mapbox-gl-draw保持一致：<code>draw.create</code>， <code>draw.selectionchange</code>，<code>draw.update</code>，<code>draw.delete</code></p><h2 id="样式导入" tabindex="-1">样式导入 <a class="header-anchor" href="#样式导入" aria-label="Permalink to &quot;样式导入&quot;">​</a></h2><p>使用此库需要导入</p><div class="language-ts vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@mapbox-web/supermap/mapbox-gl-enhance.css&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;@mapbox-web/draw/mapbox-web-draw.css&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,33)]))}const E=a(l,[["render",p]]);export{c as __pageData,E as default};
